<main class="min-h-dvh px-4">
  <h1 class="text-3xl font-bold text-white text-center my-8">Mes amis</h1>

    <!-- Demandes reçues (pending) -->
    <section class="my-8">

      <div id="header-recieved-requests" class="grid grid-cols-6 gap-1 mb-4 items-center">
        <div class="col-span-1 place-self-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="size-6 text-indigo-100/80" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0H4m16 0l-2-2m0 0l-2-2m2 2l2-2M4 13l2-2m0 0l2-2m-2 2l-2-2" />
          </svg>
        </div>

        <h2 class="text-xl col-span-4 text-white">
          Demandes reçues
        </h2>

        <% if @received_friendships.any? %>
          <div class="col-span-1 place-self-center">
            <span class="flex items-center justify-center w-6 h-6 rounded-full bg-gradient-to-r from-amber-400 to-amber-600 text-white text-xs font-bold">
              <%= @received_friendships.count %>
            </span>
          </div>

        <% end %>

      </div>

      <% if @received_friendships.empty? %>
        <div class="text-center py-8 text-indigo-100/80">
          <p>Aucune demande d'amitié reçue</p>
        </div>

      <% else %>
        <div class="grid grid-cols-1 gap-4">
          <% @received_friendships.each do |friendship| %>
            <div class="rounded-2xl bg-white/5 backdrop-blur-md shadow-xl p-4 hover:bg-white/10 transition-colors">
              <div class="grid grid-cols-6 items-center gap-2">
                <!-- Avatar -->
                <div class="size-10 rounded-full shadow-lg col-span-1 place-self-center">
                  <div class="w-full h-full rounded-full overflow-hidden bg-gradient-to-r from-amber-400 to-amber-600 flex items-center justify-center">

                    <% if friendship.sender.avatar? %>
                      <%= cl_image_tag friendship.sender.avatar, class: "w-full h-full object-cover rounded-full" %>

                    <% else %>
                      <svg width="24" height="24" viewBox="0 0 0.6 0.6" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="text-white">
                        <path d="M.44.06a.06.06 0 1 1-.12 0 .06.06 0 0 1 .12 0m0 .38a.04.04 0 1 0 0 .08.04.04 0 0 0 0-.08M.514.244.438.168A.02.02 0 0 0 .423.161H.14a.02.02 0 0 0 0 .04h.108L.12.452V.46a.02.02 0 0 0 .04.008L.2.4h.08L.203.57.2.58a.02.02 0 0 0 .04.008L.428.213l.058.059A.02.02 0 0 0 .514.244"/>
                      </svg>
                    <% end %>
                  </div>
                </div>

                <!-- Infos -->
                <ul class="col-span-3">
                  <%= link_to user_path(friendship.sender) do %>
                    <li class="font-semibold text-white"><%= friendship.sender.first_name %></li>
                    <li class="text-indigo-100/80 text-sm">@<%= friendship.sender.username %></li>
                  <% end %>
                </ul>

                <div class="col-span-1 place-self-center">
                  <%= button_to friendship_path(friendship), method: :patch, class: "flex-1 bg-form-green active:bg-green-600 text-white font-medium p-2 rounded-lg transition-colors place-content-center" do %>
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                  <% end %>
                </div>

                <div class="col-span-1 place-self-center">
                  <%= button_to friendship_path(friendship), method: :delete, class: "flex-1 bg-red-600 active:bg-red-800 text-white font-medium p-2 rounded-lg transition-colors place-content-center", data: { turbo_confirm: "Refuser cette demande d'amitié ?" } do %>
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  <% end %>
                </div>
              </div>

              <!-- Actions -->
              <div class="flex gap-2">

              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </section>

    <!-- Demandes envoyées (pending) -->
    <section class="my-8">

      <div id="header-sent-requests" class="grid grid-cols-6 gap-1 mb-4 items-center">
        <div class="col-span-1 place-self-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="size-6 text-indigo-100/80" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
          </svg>
        </div>

        <h2 class="text-xl col-span-4 text-white">
          Demandes envoyées
        </h2>

        <% if @sent_friendships.any? %>
          <div class="col-span-1 place-self-center">
            <span class="flex items-center justify-center w-6 h-6 rounded-full bg-gradient-to-r from-amber-400 to-amber-600 text-white text-xs font-bold">
              <%= @sent_friendships.count %>
            </span>
          </div>
        <% end %>

      </div>

      <% if @sent_friendships.empty? %>
        <div class="text-center py-8 text-indigo-100/80">
          <p>Aucune demande d'amitié envoyée</p>
        </div>

      <% else %>
        <div class="grid grid-cols-1 gap-4">
          <% @sent_friendships.each do |friendship| %>
            <div class="rounded-2xl bg-white/5 backdrop-blur-md shadow-xl p-4 hover:bg-white/10 transition-colors">
              <div class="grid grid-cols-6 items-center gap-2">
                <!-- Avatar -->
                <div class="size-10 rounded-full shadow-lg col-span-1 place-self-center">
                  <div class="w-full h-full rounded-full overflow-hidden bg-gradient-to-r from-amber-400 to-amber-600 flex items-center justify-center">

                    <% if friendship.receiver.avatar? %>
                      <%= cl_image_tag friendship.receiver.avatar, class: "w-full h-full object-cover rounded-full" %>

                    <% else %>
                      <svg width="24" height="24" viewBox="0 0 0.6 0.6" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="text-white">
                        <path d="M.44.06a.06.06 0 1 1-.12 0 .06.06 0 0 1 .12 0m0 .38a.04.04 0 1 0 0 .08.04.04 0 0 0 0-.08M.514.244.438.168A.02.02 0 0 0 .423.161H.14a.02.02 0 0 0 0 .04h.108L.12.452V.46a.02.02 0 0 0 .04.008L.2.4h.08L.203.57.2.58a.02.02 0 0 0 .04.008L.428.213l.058.059A.02.02 0 0 0 .514.244"/>
                      </svg>
                    <% end %>
                  </div>
                </div>

                <!-- Infos -->
                <ul class="col-span-4">
                  <%= link_to user_path(friendship.receiver) do %>
                    <li class="font-semibold text-white"><%= friendship.receiver.first_name %></li>
                    <li class="text-indigo-100/80 text-sm">@<%= friendship.receiver.username %></li>
                  <% end %>
                </ul>

                <div class="col-span-1 place-self-center">
                  <%= button_to friendship_path(friendship), method: :delete, class: "flex-1 bg-gray-600 active:bg-gray-800 text-white font-medium p-2 rounded-lg transition-colors place-content-center", data: { turbo_confirm: "Annuler cette demande d'amitié ?" } do %>
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  <% end %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </section>

    <!-- Amis acceptés -->
    <section class="my-8">

      <div id="header-accepted-friends" class="grid grid-cols-6 gap-1 mb-4 items-center">
        <div class="col-span-1 place-self-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="size-6 text-indigo-100/80" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
          </svg>
        </div>

        <h2 class="text-xl col-span-4 text-white">
          Mes amis
        </h2>

        <% if @accepted_friendships.any? %>
          <div class="col-span-1 place-self-center">
            <span class="flex items-center justify-center w-6 h-6 rounded-full bg-gradient-to-r from-amber-400 to-amber-600 text-white text-xs font-bold">
              <%= @accepted_friendships.count %>
            </span>
          </div>
        <% end %>

      </div>

      <% if @accepted_friendships.empty? %>
        <div class="text-center py-12 text-indigo-100/80">
          <p class="text-lg">Vous n'avez pas encore d'amis</p>
          <p class="text-sm mt-2">Commencez à envoyer des demandes d'amitié !</p>
        </div>

      <% else %>
        <div class="grid grid-cols-1 gap-4">
          <% @accepted_friendships.each do |friendship| %>
            <% friend = friendship.sender == current_user ? friendship.receiver : friendship.sender %>
            <div class="rounded-2xl bg-white/5 backdrop-blur-md shadow-xl p-4 hover:bg-white/10 transition-colors">
              <div class="grid grid-cols-6 items-center gap-2">
                <!-- Avatar -->
                <div class="size-10 rounded-full shadow-lg col-span-1 place-self-center">
                  <div class="w-full h-full rounded-full overflow-hidden bg-gradient-to-r from-amber-400 to-amber-600 flex items-center justify-center">

                    <% if friend.avatar? %>
                      <%= cl_image_tag friend.avatar, class: "w-full h-full object-cover rounded-full" %>

                    <% else %>
                      <svg width="24" height="24" viewBox="0 0 0.6 0.6" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="text-white">
                        <path d="M.44.06a.06.06 0 1 1-.12 0 .06.06 0 0 1 .12 0m0 .38a.04.04 0 1 0 0 .08.04.04 0 0 0 0-.08M.514.244.438.168A.02.02 0 0 0 .423.161H.14a.02.02 0 0 0 0 .04h.108L.12.452V.46a.02.02 0 0 0 .04.008L.2.4h.08L.203.57.2.58a.02.02 0 0 0 .04.008L.428.213l.058.059A.02.02 0 0 0 .514.244"/>
                      </svg>
                    <% end %>
                  </div>
                </div>

                <!-- Infos -->
                <ul class="col-span-3">
                  <%= link_to user_path(friend) do %>
                    <li class="font-semibold text-white"><%= friend.first_name %></li>
                    <li class="text-indigo-100/80 text-sm">@<%= friend.username %></li>
                  <% end %>
                </ul>

                <div class="col-span-1 place-self-center">
                  <%= link_to user_path(friend), class: "block flex-1 bg-primary-yellow active:bg-yellow-600 text-white font-medium p-2 rounded-lg transition-colors place-content-center" do %>
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                  <% end %>
                </div>

                <div class="col-span-1 place-self-center">
                  <%= button_to friendship_path(friendship), method: :delete, class: "flex-1 bg-red-600 active:bg-red-800 text-white font-medium p-2 rounded-lg transition-colors place-content-center", data: { turbo_confirm: "Supprimer #{friend.first_name} de vos amis ?" } do %>
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                    </svg>
                  <% end %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </section>
  </div>
</main>
